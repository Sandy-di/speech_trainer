{% extends 'training/base.html' %}

{% block content %}
<div class="container" style="max-width: 900px; margin: 0 auto; padding: 40px 20px;">

    <div style="margin-bottom: 30px;">
        <a href="{% url 'teacher_dashboard' %}" style="text-decoration: none; color: #666;">â† è¿”å›ä»ªè¡¨ç›˜</a>
    </div>

    <div class="header-card"
        style="background: white; padding: 30px; border-radius: 20px; box-shadow: var(--shadow-light); margin-bottom: 30px; text-align: center;">
        <h2 style="color: var(--primary-color); margin-bottom: 10px;">ğŸ“Š é˜…è¯»ç»Ÿè®¡: {{ announcement.title }}</h2>
        <div style="color: #999;">å‘å¸ƒæ—¶é—´: {{ announcement.created_at|date:"Y-m-d H:i" }}</div>

        <div style="display: flex; justify-content: center; gap: 40px; margin-top: 30px;">
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; font-weight: bold; color: #2ecc71;">{{ read_count }}</div>
                <div style="color: #666;">å·²è¯»äººæ•°</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; font-weight: bold; color: #e74c3c;">{{ unread_list|length }}</div>
                <div style="color: #666;">æœªè¯»äººæ•°</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; font-weight: bold; color: #3498db;">{{ total_count }}</div>
                <div style="color: #666;">æ€»äººæ•°</div>
            </div>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">

        <!-- æœªè¯»åå• -->
        <div style="background: white; padding: 25px; border-radius: 20px; box-shadow: var(--shadow-light);">
            <h3 style="color: #e74c3c; border-bottom: 2px solid #ffebee; padding-bottom: 10px; margin-bottom: 20px;">
                âŒ æœªè¯»å­¦å‘˜ ({{ unread_list|length }})
            </h3>
            {% if unread_list %}
            <ul style="list-style: none; padding: 0;">
                {% for student in unread_list %}
                <li
                    style="padding: 10px; border-bottom: 1px solid #f5f5f5; display: flex; align-items: center; gap: 10px;">
                    <span
                        style="background: #ffebee; color: #e74c3c; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        {{ student.username|slice:":1" }}
                    </span>
                    <span>{{ student.username }}</span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p style="text-align: center; color: #2ecc71; margin-top: 30px;">ğŸ‰ çœŸæ£’ï¼æ‰€æœ‰äººéƒ½è¯»äº†ï¼</p>
            {% endif %}
        </div>

        <!-- å·²è¯»åå• -->
        <div style="background: white; padding: 25px; border-radius: 20px; box-shadow: var(--shadow-light);">
            <h3 style="color: #2ecc71; border-bottom: 2px solid #e8f5e9; padding-bottom: 10px; margin-bottom: 20px;">
                âœ… å·²è¯»å­¦å‘˜ ({{ read_count }})
            </h3>
            {% if read_list %}
            <ul style="list-style: none; padding: 0;">
                {% for student in read_list %}
                <li
                    style="padding: 10px; border-bottom: 1px solid #f5f5f5; display: flex; align-items: center; gap: 10px;">
                    <span
                        style="background: #e8f5e9; color: #2ecc71; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        {{ student.username|slice:":1" }}
                    </span>
                    <span>{{ student.username }}</span>
                    <!-- è¿™é‡Œä»¥åå¯ä»¥åŠ ï¼š<small style="color:#999; margin-left:auto;">{{ record.read_at }}</small>ï¼Œä½†è¿™éœ€è¦è§†å›¾ä¼ è¿‡æ¥å…·ä½“è®°å½•å¯¹è±¡ -->
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p style="text-align: center; color: #999; margin-top: 30px;">æš‚æ— é˜…è¯»è®°å½•</p>
            {% endif %}
        </div>

    </div>

</div>
{% endblock %}